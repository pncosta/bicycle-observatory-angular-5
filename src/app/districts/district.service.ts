import { Injectable } from '@angular/core';

import { AngularFirestore } from 'angularfire2/firestore';
import { Observable, of } from 'rxjs';
import { District, City } from './district';
@Injectable({
  providedIn: 'root'
})
export class DistrictService {

  districts: District[] = [{'name': 'Aveiro', 'uid': 'av'}, {'name': 'Açores', 'uid': 'ac'}, {'name': 'Beja', 'uid': 'bj'}, {'name': 'Braga', 'uid': 'bg'}, {'name': 'Bragança', 'uid': 'bgc'}, {'name': 'Castelo Branco', 'uid': 'cb'}, {'name': 'Coimbra', 'uid': 'cmb'}, {'name': 'Faro', 'uid': 'fr'}, {'name': 'Guarda', 'uid': 'gd'}, {'name': 'Leiria', 'uid': 'lr'}, {'name': 'Lisboa', 'uid': 'lx'}, {'name': 'Madeira', 'uid': 'md'}, {'name': 'Portalegre', 'uid': 'pl'}, {'name': 'Porto', 'uid': 'pt'}, {'name': 'Santarém', 'uid': 'st'}, {'name': 'Setúbal', 'uid': 'sbl'}, {'name': 'Viana do Castelo', 'uid': 'vc'}, {'name': 'Vila Real', 'uid': 'vr'}, {'name': 'Viseu', 'uid': 'vs'}, {'name': 'Évora', 'uid': 'ev'}]
  
  cities: City[] = [{'name': 'Anadia', 'uid': 'av-0', 'district': 'av'}, {'name': 'Aveiro', 'uid': 'av-1', 'district': 'av'}, {'name': 'Esmoriz', 'uid': 'av-2', 'district': 'av'}, {'name': 'Espinho', 'uid': 'av-3', 'district': 'av'}, {'name': 'Estarreja', 'uid': 'av-4', 'district': 'av'}, {'name': 'Fiães', 'uid': 'av-5', 'district': 'av'}, {'name': 'Gafanha da Nazaré', 'uid': 'av-6', 'district': 'av'}, {'name': 'Lourosa', 'uid': 'av-7', 'district': 'av'}, {'name': 'Mealhada', 'uid': 'av-8', 'district': 'av'}, {'name': 'Oliveira de Azeméis', 'uid': 'av-9', 'district': 'av'}, {'name': 'Oliveira do Bairro', 'uid': 'av-10', 'district': 'av'}, {'name': 'Ovar', 'uid': 'av-11', 'district': 'av'}, {'name': 'Santa Maria da Feira', 'uid': 'av-12', 'district': 'av'}, {'name': 'São João da Madeira', 'uid': 'av-13', 'district': 'av'}, {'name': 'Vale de Cambra', 'uid': 'av-14', 'district': 'av'}, {'name': 'Águeda', 'uid': 'av-15', 'district': 'av'}, {'name': 'Ílhavo', 'uid': 'av-16', 'district': 'av'}, {'name': 'Angra do Heroísmo', 'uid': 'ac-0', 'district': 'ac'}, {'name': 'Horta', 'uid': 'ac-1', 'district': 'ac'}, {'name': 'Lagoa', 'uid': 'ac-2', 'district': 'ac'}, {'name': 'Ponta Delgada', 'uid': 'ac-3', 'district': 'ac'}, {'name': 'Praia da Vitória', 'uid': 'ac-4', 'district': 'ac'}, {'name': 'Ribeira Grande', 'uid': 'ac-5', 'district': 'ac'}, {'name': 'Beja', 'uid': 'bj-0', 'district': 'bj'}, {'name': 'Moura', 'uid': 'bj-1', 'district': 'bj'}, {'name': 'Serpa', 'uid': 'bj-2', 'district': 'bj'}, {'name': 'Barcelos', 'uid': 'bg-0', 'district': 'bg'}, {'name': 'Braga', 'uid': 'bg-1', 'district': 'bg'}, {'name': 'Esposende', 'uid': 'bg-2', 'district': 'bg'}, {'name': 'Fafe', 'uid': 'bg-3', 'district': 'bg'}, {'name': 'Guimarães', 'uid': 'bg-4', 'district': 'bg'}, {'name': 'Vila Nova de Famalicão', 'uid': 'bg-5', 'district': 'bg'}, {'name': 'Vizela', 'uid': 'bg-6', 'district': 'bg'}, {'name': 'Bragança', 'uid': 'bgc-0', 'district': 'bgc'}, {'name': 'Macedo de Cavaleiros', 'uid': 'bgc-1', 'district': 'bgc'}, {'name': 'Miranda do Douro / Miranda de l Douro', 'uid': 'bgc-2', 'district': 'bgc'}, {'name': 'Mirandela', 'uid': 'bgc-3', 'district': 'bgc'}, {'name': 'Castelo Branco', 'uid': 'cb-0', 'district': 'cb'}, {'name': 'Covilhã', 'uid': 'cb-1', 'district': 'cb'}, {'name': 'Fundão', 'uid': 'cb-2', 'district': 'cb'}, {'name': 'Cantanhede', 'uid': 'cmb-0', 'district': 'cmb'}, {'name': 'Coimbra', 'uid': 'cmb-1', 'district': 'cmb'}, {'name': 'Figueira da Foz', 'uid': 'cmb-2', 'district': 'cmb'}, {'name': 'Oliveira do Hospital', 'uid': 'cmb-3', 'district': 'cmb'}, {'name': 'Albufeira', 'uid': 'fr-0', 'district': 'fr'}, {'name': 'Faro', 'uid': 'fr-1', 'district': 'fr'}, {'name': 'Lagoa', 'uid': 'fr-2', 'district': 'fr'}, {'name': 'Lagos', 'uid': 'fr-3', 'district': 'fr'}, {'name': 'Loulé', 'uid': 'fr-4', 'district': 'fr'}, {'name': 'Olhão da Restauração', 'uid': 'fr-5', 'district': 'fr'}, {'name': 'Portimão', 'uid': 'fr-6', 'district': 'fr'}, {'name': 'Quarteira', 'uid': 'fr-7', 'district': 'fr'}, {'name': 'Silves', 'uid': 'fr-8', 'district': 'fr'}, {'name': 'Tavira', 'uid': 'fr-9', 'district': 'fr'}, {'name': 'Vila Real de Santo António', 'uid': 'fr-10', 'district': 'fr'}, {'name': 'Gouveia', 'uid': 'gd-0', 'district': 'gd'}, {'name': 'Guarda', 'uid': 'gd-1', 'district': 'gd'}, {'name': 'Mêda', 'uid': 'gd-2', 'district': 'gd'}, {'name': 'Pinhel', 'uid': 'gd-3', 'district': 'gd'}, {'name': 'Sabugal', 'uid': 'gd-4', 'district': 'gd'}, {'name': 'Seia', 'uid': 'gd-5', 'district': 'gd'}, {'name': 'Trancoso', 'uid': 'gd-6', 'district': 'gd'}, {'name': 'Vila Nova de Foz Côa', 'uid': 'gd-7', 'district': 'gd'}, {'name': 'Alcobaça', 'uid': 'lr-0', 'district': 'lr'}, {'name': 'Caldas da Rainha', 'uid': 'lr-1', 'district': 'lr'}, {'name': 'Leiria', 'uid': 'lr-2', 'district': 'lr'}, {'name': 'Marinha Grande', 'uid': 'lr-3', 'district': 'lr'}, {'name': 'Peniche', 'uid': 'lr-4', 'district': 'lr'}, {'name': 'Pombal', 'uid': 'lr-5', 'district': 'lr'}, {'name': 'Agualva-Cacém', 'uid': 'lx-0', 'district': 'lx'}, {'name': 'Alverca do Ribatejo', 'uid': 'lx-1', 'district': 'lx'}, {'name': 'Amadora', 'uid': 'lx-2', 'district': 'lx'}, {'name': 'Lisboa', 'uid': 'lx-3', 'district': 'lx'}, {'name': 'Loures', 'uid': 'lx-4', 'district': 'lx'}, {'name': 'Odivelas', 'uid': 'lx-5', 'district': 'lx'}, {'name': 'Póvoa de Santa Iria', 'uid': 'lx-6', 'district': 'lx'}, {'name': 'Queluz', 'uid': 'lx-7', 'district': 'lx'}, {'name': 'Sacavém', 'uid': 'lx-8', 'district': 'lx'}, {'name': 'Torres Vedras', 'uid': 'lx-9', 'district': 'lx'}, {'name': 'Vila Franca de Xira', 'uid': 'lx-10', 'district': 'lx'}, {'name': 'Caniço', 'uid': 'md-0', 'district': 'md'}, {'name': 'Câmara de Lobos', 'uid': 'md-1', 'district': 'md'}, {'name': 'Funchal', 'uid': 'md-2', 'district': 'md'}, {'name': 'Machico', 'uid': 'md-3', 'district': 'md'}, {'name': 'Santa Cruz', 'uid': 'md-4', 'district': 'md'}, {'name': 'Santana', 'uid': 'md-5', 'district': 'md'}, {'name': 'Vila Baleira', 'uid': 'md-6', 'district': 'md'}, {'name': 'Elvas', 'uid': 'pl-0', 'district': 'pl'}, {'name': 'Ponte de Sor', 'uid': 'pl-1', 'district': 'pl'}, {'name': 'Portalegre', 'uid': 'pl-2', 'district': 'pl'}, {'name': 'Alfena', 'uid': 'pt-0', 'district': 'pt'}, {'name': 'Amarante', 'uid': 'pt-1', 'district': 'pt'}, {'name': 'Ermesinde', 'uid': 'pt-2', 'district': 'pt'}, {'name': 'Felgueiras', 'uid': 'pt-3', 'district': 'pt'}, {'name': 'Freamunde', 'uid': 'pt-4', 'district': 'pt'}, {'name': 'Gandra', 'uid': 'pt-5', 'district': 'pt'}, {'name': 'Gondomar', 'uid': 'pt-6', 'district': 'pt'}, {'name': 'Lixa', 'uid': 'pt-7', 'district': 'pt'}, {'name': 'Lordelo', 'uid': 'pt-8', 'district': 'pt'}, {'name': 'Maia', 'uid': 'pt-9', 'district': 'pt'}, {'name': 'Marco de Canaveses', 'uid': 'pt-10', 'district': 'pt'}, {'name': 'Matosinhos', 'uid': 'pt-11', 'district': 'pt'}, {'name': 'Paredes', 'uid': 'pt-12', 'district': 'pt'}, {'name': 'Paços de Ferreira', 'uid': 'pt-13', 'district': 'pt'}, {'name': 'Penafiel', 'uid': 'pt-14', 'district': 'pt'}, {'name': 'Porto', 'uid': 'pt-15', 'district': 'pt'}, {'name': 'Póvoa de Varzim', 'uid': 'pt-16', 'district': 'pt'}, {'name': 'Rebordosa', 'uid': 'pt-17', 'district': 'pt'}, {'name': 'Rio Tinto', 'uid': 'pt-18', 'district': 'pt'}, {'name': 'Santo Tirso', 'uid': 'pt-19', 'district': 'pt'}, {'name': 'Senhora da Hora', 'uid': 'pt-20', 'district': 'pt'}, {'name': 'São Mamede de Infesta', 'uid': 'pt-21', 'district': 'pt'}, {'name': 'Trofa', 'uid': 'pt-22', 'district': 'pt'}, {'name': 'Valbom', 'uid': 'pt-23', 'district': 'pt'}, {'name': 'Valongo', 'uid': 'pt-24', 'district': 'pt'}, {'name': 'Vila do Conde', 'uid': 'pt-25', 'district': 'pt'}, {'name': 'Vila Nova de Gaia', 'uid': 'pt-26', 'district': 'pt'}, {'name': 'Abrantes', 'uid': 'st-0', 'district': 'st'}, {'name': 'Almeirim', 'uid': 'st-1', 'district': 'st'}, {'name': 'Cartaxo', 'uid': 'st-2', 'district': 'st'}, {'name': 'Entroncamento', 'uid': 'st-3', 'district': 'st'}, {'name': 'Fátima', 'uid': 'st-4', 'district': 'st'}, {'name': 'Ourém', 'uid': 'st-5', 'district': 'st'}, {'name': 'Rio Maior', 'uid': 'st-6', 'district': 'st'}, {'name': 'Samora Correia', 'uid': 'st-7', 'district': 'st'}, {'name': 'Santarém', 'uid': 'st-8', 'district': 'st'}, {'name': 'Tomar', 'uid': 'st-9', 'district': 'st'}, {'name': 'Torres Novas', 'uid': 'st-10', 'district': 'st'}, {'name': 'Alcácer do Sal', 'uid': 'sbl-0', 'district': 'sbl'}, {'name': 'Almada', 'uid': 'sbl-1', 'district': 'sbl'}, {'name': 'Amora', 'uid': 'sbl-2', 'district': 'sbl'}, {'name': 'Barreiro', 'uid': 'sbl-3', 'district': 'sbl'}, {'name': 'Costa da Caparica', 'uid': 'sbl-4', 'district': 'sbl'}, {'name': 'Montijo', 'uid': 'sbl-5', 'district': 'sbl'}, {'name': 'Santiago do Cacém', 'uid': 'sbl-6', 'district': 'sbl'}, {'name': 'Seixal', 'uid': 'sbl-7', 'district': 'sbl'}, {'name': 'Setúbal', 'uid': 'sbl-8', 'district': 'sbl'}, {'name': 'Sines', 'uid': 'sbl-9', 'district': 'sbl'}, {'name': 'Vila Nova de Santo André', 'uid': 'sbl-10', 'district': 'sbl'}, {'name': 'Valença', 'uid': 'vc-0', 'district': 'vc'}, {'name': 'Viana do Castelo', 'uid': 'vc-1', 'district': 'vc'}, {'name': 'Chaves', 'uid': 'vr-0', 'district': 'vr'}, {'name': 'Peso da Régua', 'uid': 'vr-1', 'district': 'vr'}, {'name': 'Valpaços', 'uid': 'vr-2', 'district': 'vr'}, {'name': 'Vila Real', 'uid': 'vr-3', 'district': 'vr'}, {'name': 'Lamego', 'uid': 'vs-0', 'district': 'vs'}, {'name': 'Mangualde', 'uid': 'vs-1', 'district': 'vs'}, {'name': 'Santa Comba Dão', 'uid': 'vs-2', 'district': 'vs'}, {'name': 'São Pedro do Sul', 'uid': 'vs-3', 'district': 'vs'}, {'name': 'Tarouca', 'uid': 'vs-4', 'district': 'vs'}, {'name': 'Tondela', 'uid': 'vs-5', 'district': 'vs'}, {'name': 'Viseu', 'uid': 'vs-6', 'district': 'vs'}, {'name': 'Borba', 'uid': 'ev-0', 'district': 'ev'}, {'name': 'Estremoz', 'uid': 'ev-1', 'district': 'ev'}, {'name': 'Montemor-o-Novo', 'uid': 'ev-2', 'district': 'ev'}, {'name': 'Reguengos de Monsaraz', 'uid': 'ev-3', 'district': 'ev'}, {'name': 'Vendas Novas', 'uid': 'ev-4', 'district': 'ev'}, {'name': 'Évora', 'uid': 'ev-5', 'district': 'ev'}]

  constructor(private db: AngularFirestore) { }


  getDistricts(): Observable<District[]> {
    return this.db.collection<District>('/district')
      .valueChanges();
  }

  getCities(): Observable<City[]> {
    return this.db.collection<City>('/city')
      .valueChanges();
  }

    /** GET event by id. Will 404 if id not found */
    getDistrict(uid: string): Observable<Event> {
          const itemDoc = this.db.doc<Event>('district/' + uid);
          return itemDoc.valueChanges();
    }


  addDistrict(d: District): Promise<any> {
    return this.db.collection<District>('district').doc(d.uid).set(d);
  }

  addCity(c: City): Promise<any> {
    return this.db.collection<District>('city').doc(c.uid).set(c);
  }

  populateDistricts() { 
    this.districts.forEach(d => {
      this.addDistrict(d);
    });

    this.cities.forEach(d => {
      this.addCity(d);
    })

  }
}
